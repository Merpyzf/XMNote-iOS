# 搜索交互升级 iOS26 - 设计文档

## 1. 设计概览
- 使用 iOS 26 的 `tabViewSearchActivation(.searchTabSelection)` 作为搜索 Tab 激活策略。
- 在 `TabView` 级别统一挂载 `.searchable(...)`，让搜索输入状态由 `MainTabView` 统一管理。
- `SearchView` 仅负责展示搜索态内容，不再维护输入框状态。

## 2. 状态设计
- `selectedTab`：当前选中主 Tab。
- `lastNonSearchTab`：最近一次非搜索 Tab，用于拦截“点搜索即进页”。
- `searchQuery`：系统搜索输入绑定。
- `isSearchPresented`：系统搜索框展示状态。

## 3. 交互流程
1. 用户点击搜索 Tab。
2. 若 `searchQuery` 为空：拦截 Tab 切换，恢复到 `lastNonSearchTab`，并展示系统搜索框。
3. 用户输入文本后：监听 `searchQuery` 变化，自动切换到 `.search` Tab，展示 `SearchView`。

## 4. 视图改造
- `MainTabView`：
  - 搜索 Tab 继续使用现有 `NavigationStack(path: $searchPath)`。
  - `SearchView` 改为注入 `query` 绑定。
- `SearchView`：
  - 删除 `TopSwitcher(title: "搜索")`。
  - 删除页面内手写 `TextField`。
  - 保留结果承载区和 Add 菜单按钮。

## 5. 风险与规避
- 风险：搜索 Tab 与系统搜索激活的状态竞争导致跳转闪烁。
- 规避：在 `selectedTab` 变化时只在空查询场景拦截，输入后单向切换到搜索页。

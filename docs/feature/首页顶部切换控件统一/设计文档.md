# 首页顶部切换控件统一 - 设计文档

## 1. 设计概览
- 新增通用组件：`xmnote/UIComponents/Tabs/TopSwitcher.swift`
- 组件支持两种模式：
  - `tabs`：用于有二级页面切换的容器页。
  - `title`：用于无二级切换的单标题页。

## 2. 组件接口
- `TopSwitcher(selection:tabs:quote:titleProvider:trailing:)`
  - 输入当前选中项绑定、可选项数组、标题映射。
  - 内部渲染引号风格 tab。
- `TopSwitcher(title:quote:trailing:)`
  - 输入标题文本。
  - 内部渲染同风格单标题。

## 3. 视觉与动效
- 字体：17pt，选中/标题使用 semibold。
- 颜色：选中 `.primary`，未选中 `.secondary`。
- 引号装饰：品牌绿透明度（浅色 0.22，深色 0.28）。
- 切换动画：`.snappy(duration: 0.25, extraBounce: 0.06)`。

## 4. 页面接入方案
- `ReadingContainerView`：移除私有 `ReadingTopSwitcher`，改为 `TopSwitcher(tabs)`。
- `BookContainerView`：移除私有 `BookTopSwitcher`，改为 `TopSwitcher(tabs)`。
- `NoteContainerView`：移除私有 `NoteTopSwitcher`，改为 `TopSwitcher(tabs)`，保留功能按钮 + 添加按钮。
- `PersonalView`：顶部改为 `TopSwitcher(title: "我的")`。
- `SearchView`（`MainTabView.swift` 内）：顶部改为 `TopSwitcher(title: "搜索")`。

## 5. 可测试性设计
- 统一可访问性标识：
  - 容器：`top_switcher`
  - Tab：`top_switcher_tab_<标题>`
  - 标题：`top_switcher_title_<标题>`
- UI 测试据此覆盖 5 个页面顶部控件存在性与切换可达性。

## 6. 兼容性与风险
- 组件仅替换顶部展示层，不改业务状态管理。
- 风险点：
  - 中文标题作为 accessibility identifier 需在 UI 测试中统一使用同文案。
  - Tab 数组为空时不展示内容（当前业务不存在该场景）。
